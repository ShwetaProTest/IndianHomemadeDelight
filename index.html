<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Delicious Indian Kitchen</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fff8f0;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      background-color: #f44336;
      color: white;
      font-size: 18px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .header button {
      background: none;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    .header-title {
      font-weight: bold;
      cursor: pointer;
    }
    .cart-button {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
    }
    .menu {
      padding: 16px;
    }
    .category {
      margin-bottom: 24px;
    }
    .item {
      background-color: white;
      margin: 8px 0;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .quantity-controls button {
      padding: 4px 10px;
      font-size: 16px;
    }
    .view-cart {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: green;
      color: white;
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
    }
    .cart-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    .cart-content {
      background: white;
      padding: 24px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }
    .cart-content h2 {
      margin-top: 0;
    }
    .cart-item {
      margin-bottom: 10px;
    }
    .place-order {
      background: #25d366;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="header">
    <button onclick="handleCancel()">Cancel</button>
    <div class="header-title" onclick="window.open('https://wa.me/4917611748611', '_blank')">Delicious Indian Kitchen ></div>
    <button class="cart-button" onclick="openCart()">ðŸ›’</button>
  </div>

  <div class="menu" id="menu"></div>

  <button class="view-cart" id="viewCartBtn" onclick="openCart()" style="display:none;">View Cart</button>

  <div class="cart-modal" id="cartModal">
    <div class="cart-content">
      <h2>Your Cart</h2>
      <div id="cartItems"></div>
      <p id="totalPrice"></p>
      <button class="place-order" onclick="placeOrder()">Place Order on WhatsApp</button>
    </div>
  </div>

  <script>
    const menuData = [
      {
        category: "Biryani",
        items: [
          { name: "Hyderabadi Biryani", desc: "Made with fresh veg", price: 8 },
          { name: "Vegetable Biryani", desc: "Slow cooked basmati rice", price: 7 }
        ]
      },
      {
        category: "Curries",
        items: [
          { name: "Paneer Butter Masala", desc: "Rich creamy tomato sauce", price: 6 },
          { name: "Chickpea Masala", desc: "Protein-rich, lightly spiced", price: 5 }
        ]
      },
      {
        category: "Chutney",
        items: [
          { name: "Coconut Chutney", desc: "Fresh coconut & roasted chana", price: 2 },
          { name: "Mint Chutney", desc: "Tangy and refreshing", price: 2 }
        ]
      },
      {
        category: "Batter",
        items: [
          { name: "Dosa Batter", desc: "Fermented with urad dal & rice", price: 3 },
          { name: "Idli Batter", desc: "Soft and fluffy", price: 3 }
        ]
      },
      {
        category: "Snacks",
        items: [
          { name: "Medu Vada", desc: "Crispy and fluffy", price: 4 },
          { name: "Pakoda Mix", desc: "Just fry and eat", price: 3 }
        ]
      }
    ];

    const cart = {};

    function updateMenu() {
      const menu = document.getElementById("menu");
      menu.innerHTML = "";
      menuData.forEach(cat => {
        const catDiv = document.createElement("div");
        catDiv.className = "category";
        catDiv.innerHTML = `<h3>${cat.category}</h3>`;

        cat.items.forEach(item => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "item";

          const qty = cart[item.name] || 0;

          itemDiv.innerHTML = `
            <div class="item-header">
              <div>
                <strong>${item.name}</strong><br>
                ${item.desc}<br>
                â‚¬${item.price}
              </div>
              <div class="quantity-controls">
                ${qty > 0 ? `<button onclick="decreaseQty('${item.name}')">-</button>` : ""}
                ${qty > 0 ? `<span>${qty}</span>` : "<button onclick=\"increaseQty('${item.name}', ${item.price})\">+</button>"}
                ${qty > 0 ? `<button onclick="increaseQty('${item.name}', ${item.price})">+</button>` : ""}
              </div>
            </div>
          `;

          catDiv.appendChild(itemDiv);
        });

        menu.appendChild(catDiv);
      });
    }

    function increaseQty(name, price) {
      cart[name] = (cart[name] || 0) + 1;
      document.getElementById("viewCartBtn").style.display = "block";
      updateMenu();
    }

    function decreaseQty(name) {
      if (cart[name]) {
        cart[name]--;
        if (cart[name] === 0) delete cart[name];
      }
      updateMenu();
      if (Object.keys(cart).length === 0) document.getElementById("viewCartBtn").style.display = "none";
    }

    function openCart() {
      document.getElementById("cartModal").style.display = "flex";
      const cartItems = document.getElementById("cartItems");
      const totalPrice = document.getElementById("totalPrice");
      cartItems.innerHTML = "";
      let total = 0;
      for (const [name, qty] of Object.entries(cart)) {
        const item = menuData.flatMap(cat => cat.items).find(i => i.name === name);
        total += item.price * qty;
        cartItems.innerHTML += `<div class='cart-item'>${name} Ã— ${qty} â€” â‚¬${item.price * qty}</div>`;
      }
      totalPrice.innerText = `Total: â‚¬${total.toFixed(2)}`;
    }

    function placeOrder() {
      const phone = "4917611748611";
      let msg = "Hello! I'd like to order:\n\n";
      let total = 0;
      for (const [name, qty] of Object.entries(cart)) {
        const item = menuData.flatMap(cat => cat.items).find(i => i.name === name);
        total += item.price * qty;
        msg += `- ${name} Ã— ${qty} â€” â‚¬${item.price * qty}\n`;
      }
      msg += `\nTotal: â‚¬${total.toFixed(2)}\n\nPlease confirm. Thanks!`;
      const encodedMsg = encodeURIComponent(msg);
      const url = `https://wa.me/${phone}?text=${encodedMsg}`;
      window.open(url, '_blank');
    }

    function handleCancel() {
      try {
        window.close();
      } catch (e) {
        window.location.href = "https://www.google.com";
      }
    }

    updateMenu();
  </script>
</body>
</html>
